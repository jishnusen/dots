#! /bin/sh

~/.fehbg &

fork_it () { nohup $@ >/dev/null 2>&1 & }

pgrep -x picom > /dev/null || fork_it picom
pgrep -x sxhkd > /dev/null || fork_it sxhkd
pgrep -x polybar > /dev/null || fork_it polybar
pgrep -x 1password > /dev/null || fork_it 1password --silent
pgrep -x playerctld > /dev/null || fork_t playerctld

bspc monitor -d I II III IV V VI VII VIII IX X

bspc config border_width         4
bspc config normal_border_color $CAT_OVERLAY0
bspc config focused_border_color $CAT_LAVENDER
bspc config urgent_border_color $CAT_PEACH
bspc config presel_border_color $CAT_YELLOW

bspc config window_gap           5

bspc config split_ratio          0.52
bspc config borderless_monocle   true
bspc config gapless_monocle      true

bspc rule -a Emacs state=tiled
bspc rule -a iwgtk state=floating
bspc rule -a 1Password state=floating center=true
bspc rule -a discord desktop='^9'
bspc rule -a "Google-chrome" desktop='^2' follow=on
bspc rule -a *:*:"Picture in picture" state=floating rectangle=512x288+2000+1100
bspc rule -a cmus desktop="X" state=floating rectangle="720x620+32+775"
bspc rule -a ncmpcpp desktop="X" state=floating rectangle="720x620+32+775"

# aesthetic cmus location on desktop X
# can only have 1 cmus at a time anyways
pgrep -x cmus > /dev/null || fork_it ~/.local/bin/floating_cmus.sh
